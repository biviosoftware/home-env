#!/usr/bin/env bash
#
# Intialize global pyenv
#
if [[ -n $_BIVIO_PYENV_GLOBAL_FLAG ]]; then
    # Called recursively (we call ~/.bashrc below which may recurse)
    exit 0
fi
export _BIVIO_PYENV_GLOBAL_FLAG=1

version=$1
if [ -z "$version" ]; then
    echo "Usage: $0 python-version" 1>&2
    exit 1
fi
. ~/.bashrc
if [ ! -d ~/.pyenv/versions/$version ]; then
    b_pyenv_install $version
    . ~/.bashrc
fi
pyenv global $version
